#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json
from collections import Counter
from pathlib import Path


OUTPUT_PATH = Path(__file__).resolve().parents[1] / "src" / "data" / "questions" / "public-health.json"


def make(question: str, answer: str, subtopic: str, difficulty: str) -> dict:
    return {
        "question": question.strip(),
        "answer": answer.strip(),
        "subtopic": subtopic,
        "difficulty": difficulty,
    }


def add_rows(bucket: list[dict], subtopic: str, difficulty: str, rows: list[tuple[str, str]]) -> None:
    for question, answer in rows:
        bucket.append(make(question, answer, subtopic, difficulty))


def validate_bucket(name: str, bucket: list[dict], expected: dict[str, int]) -> None:
    if len(bucket) != 50:
        raise ValueError(f"{name}: expected 50 questions, got {len(bucket)}")

    counts = Counter(item["difficulty"] for item in bucket)
    if dict(counts) != expected:
        raise ValueError(f"{name}: difficulty mismatch {counts}, expected {expected}")


HABITS = "عادات يومية ونظافة شخصية"
BODY = "جسم الإنسان ووظائفه"
NUTRITION = "تغذية ونشاط ووقاية"
FOOT_FIRST_AID = "صحة القدم والحذاء وإسعافات أولية"


# ------------------------------------------------
# 1) عادات يومية ونظافة شخصية (50)
# distribution: 20 easy / 20 medium / 10 hard
# ------------------------------------------------
habits: list[dict] = []

habits_easy = [
    ("ما أقل مدة موصى بها لفرك اليدين بالصابون؟", "20 ثانية على الأقل"),
    ("متى يجب غسل اليدين قبل تناول الطعام؟", "دائمًا قبل الأكل"),
    ("ما الخطوة الأساسية بعد استخدام الحمام؟", "غسل اليدين جيدًا بالماء والصابون"),
    ("إذا لم يتوفر الماء والصابون، ما الحد الأدنى لنسبة الكحول في المعقم؟", "60% على الأقل"),
    ("كم مرة يُنصح بتنظيف الأسنان يوميًا؟", "مرتان يوميًا"),
    ("كم المدة الموصى بها لكل مرة تفريش أسنان؟", "دقيقتان"),
    ("كم مرة يُنصح بتنظيف ما بين الأسنان بالخيط؟", "مرة يوميًا"),
    ("كل كم شهر يُفضّل تغيير فرشاة الأسنان غالبًا؟", "كل 3 إلى 4 أشهر"),
    ("لماذا الاستحمام المنتظم مهم؟", "لخفض تراكم العرق والجراثيم"),
    ("ما فائدة قص الأظافر بانتظام؟", "تقليل تراكم الأوساخ والميكروبات تحت الأظافر"),
    ("كيف تتصرف عند العطس أو السعال؟", "تغطية الفم والأنف بمنديل أو بالمرفق"),
    ("ما الإجراء الصحيح قبل أكل الخضار أو الفاكهة الطازجة؟", "غسلها جيدًا"),
    ("هل مشاركة المنشفة الشخصية فكرة جيدة؟", "لا، لأنها قد تنقل العدوى"),
    ("ما فائدة تهوية الغرفة يوميًا؟", "تجديد الهواء وتقليل تراكم الملوثات"),
    ("كم ساعة نوم على الأقل يحتاجها معظم البالغين يوميًا؟", "7 ساعات أو أكثر"),
    ("بعد غسل اليدين، لماذا يُفضّل تجفيفهما؟", "لأن الرطوبة قد تساعد على بقاء بعض الجراثيم"),
    ("ما فائدة تنظيف الهاتف المحمول دوريًا؟", "تقليل انتقال الجراثيم من الأسطح لليدين والوجه"),
    ("ما أفضل مشروب يومي للحفاظ على الترطيب؟", "الماء"),
    ("ماذا تفعل قبل لمس جرح مفتوح؟", "تنظيف اليدين أولًا"),
    ("لماذا تغيير الملابس الداخلية يوميًا مهم صحيًا؟", "لمنع الرطوبة وتكاثر البكتيريا والفطريات"),
]
add_rows(habits, HABITS, "سهل", habits_easy)

habits_medium = [
    ("إذا كانت يداك غير متسختين ظاهريًا ولا يوجد ماء، ما البديل الصحيح؟", "معقم كحولي بنسبة 60% أو أكثر"),
    ("في حالة اتساخ اليدين بالشحوم أو الطين، أيهما أفضل: المعقم أم الماء والصابون؟", "الماء والصابون"),
    ("لماذا يُفضّل عدم تفريش الأسنان مباشرة بعد مشروب حمضي؟", "لحماية مينا الأسنان من التآكل"),
    ("ما أفضل وقت لاستخدام خيط الأسنان؟", "أي وقت مناسب يوميًا المهم المداومة"),
    ("لماذا لا يجب مشاركة فرشاة الأسنان؟", "لأنها قد تنقل الجراثيم والعدوى"),
    ("أي مكان غالبًا يُنسى أثناء غسل اليدين؟", "بين الأصابع وتحت الأظافر"),
    ("كيف يُستخدم معقم اليدين بشكل صحيح؟", "تغطية جميع الأسطح وفرك اليدين حتى الجفاف"),
    ("لماذا يجب الإشراف على الأطفال عند استخدام المعقم؟", "لتجنب بلعه بالخطأ"),
    ("ما علامة شائعة لقلة النوم المزمنة؟", "النعاس وضعف التركيز نهارًا"),
    ("ما عادة بسيطة تساعد على نوم أفضل؟", "تثبيت وقت النوم والاستيقاظ يوميًا"),
    ("كيف تؤثر الشاشات المضيئة قبل النوم؟", "قد تؤخر النوم وتضعف جودته"),
    ("ما التصرف الصحيح بعد لمس القمامة؟", "غسل اليدين"),
    ("لماذا يُفضّل غسل أغطية الوسائد بانتظام؟", "لتقليل تراكم العرق والدهون والميكروبات"),
    ("ترك الطعام المطهو خارج الثلاجة لساعات طويلة قد يسبب ماذا؟", "زيادة خطر نمو البكتيريا"),
    ("لماذا النظافة الشخصية مهمة في الوقاية من العدوى التنفسية؟", "لأنها تقلل انتقال الجراثيم باللمس"),
    ("ما علاقة شرب الماء بصحة الكلى؟", "يساعدها على التخلص من الفضلات بكفاءة"),
    ("الإكثار من المشروبات السكرية يؤثر على ماذا؟", "يزيد خطر تسوس الأسنان ومشكلات الوزن"),
    ("كم مرة يُفضّل زيارة طبيب الأسنان على الأقل؟", "مرة سنويًا على الأقل"),
    ("لماذا يُنصح بمعجون أسنان يحتوي على الفلورايد؟", "لتقوية المينا وتقليل التسوس"),
    ("ما فائدة غسل اليدين قبل تحضير الطعام؟", "تقليل انتقال الجراثيم للطعام"),
]
add_rows(habits, HABITS, "متوسط", habits_medium)

habits_hard = [
    ("أنت عدت من الخارج ولمست مقابض كثيرة ثم ستأكل فورًا. ما الإجراء الصحيح؟", "غسل اليدين جيدًا قبل الأكل"),
    ("لماذا لا يُعتبر المعقم بديلًا كاملًا للصابون في كل الحالات؟", "لأنه أقل فاعلية مع الأوساخ الظاهرة ولا يزيل بعض المواد الكيميائية"),
    ("ما الفرق العملي بين مناديل الأطفال ومعقم اليدين الكحولي؟", "مناديل الأطفال لا تكفي لتعقيم اليدين، والمعقم الفعّال يجب أن يحتوي على 60% كحول أو أكثر"),
    ("إذا تلفت شعيرات الفرشاة قبل مرور 3 أشهر، ماذا تفعل؟", "تُستبدل فورًا"),
    ("شخص ينام 5 ساعات يوميًا بشكل مستمر. ما أثر صحي متوقع؟", "انخفاض التركيز وزيادة الإرهاق"),
    ("كم ساعة نوم موصى بها غالبًا للمراهقين (13-17 سنة)؟", "8 إلى 10 ساعات يوميًا"),
    ("كم ساعة نوم موصى بها غالبًا للأطفال بعمر المدرسة (6-12 سنة)؟", "9 إلى 12 ساعة يوميًا"),
    ("لماذا غسل اليدين ثم تجفيفهما أفضل من الغسل فقط؟", "لأن التجفيف يقلل بقاء الرطوبة التي قد تساعد على انتقال الجراثيم"),
    ("بعد أعمال الحديقة وكانت اليدان متسختين جدًا، ما الأفضل؟", "الغسل بالماء والصابون بدل الاعتماد على المعقم وحده"),
    ("طفل عنده جفاف فم وقلة دموع وخمول. ما التفسير الصحي الأقرب؟", "قد يكون مصابًا بالجفاف ويحتاج تقييمًا طبيًا"),
]
add_rows(habits, HABITS, "صعب", habits_hard)

validate_bucket(HABITS, habits, {"سهل": 20, "متوسط": 20, "صعب": 10})


# ----------------------------------------------
# 2) جسم الإنسان ووظائفه (50)
# distribution: 20 easy / 20 medium / 10 hard
# ----------------------------------------------
body: list[dict] = []

body_easy = [
    ("ما العضو المسؤول عن ضخ الدم في الجسم؟", "القلب"),
    ("كم عدد حجرات القلب؟", "4 حجرات"),
    ("ما اسم الحجرتين العلويتين في القلب؟", "الأذينان"),
    ("ما اسم الحجرتين السفليتين في القلب؟", "البطينان"),
    ("أي عضوين ينقّيان الدم من الفضلات ويكوّنان البول؟", "الكليتان"),
    ("كم عدد الكليتين عادةً عند الإنسان؟", "2"),
    ("إلى أين ينتقل البول بعد الكليتين قبل خروجه؟", "إلى المثانة عبر الحالبين"),
    ("ما أكبر عضو في جسم الإنسان؟", "الجلد"),
    ("ما العضو المسؤول عن التفكير والذاكرة واتخاذ القرار؟", "الدماغ"),
    ("ما العضو الأساسي للتنفس؟", "الرئتان"),
    ("كم عدد الرئتين؟", "رئتان"),
    ("أي جزء من الجهاز الهضمي يمتص معظم المغذيات؟", "الأمعاء الدقيقة"),
    ("أي جزء من الأمعاء يمتص معظم الماء من بقايا الطعام؟", "القولون (الأمعاء الغليظة)"),
    ("ما وظيفة خلايا الدم الحمراء الأساسية؟", "نقل الأكسجين"),
    ("كم عدد عظام الإنسان البالغ تقريبًا؟", "206 عظمة"),
    ("ما متوسط درجة حرارة الجسم الطبيعية تقريبًا؟", "حوالي 37 درجة مئوية"),
    ("متى نعتبر غالبًا أن الشخص لديه حمى؟", "عند حرارة أعلى من 38 درجة مئوية"),
    ("أي عضو يبدأ فيه الهضم الميكانيكي والكيميائي للطعام؟", "الفم ثم المعدة يكملان عملية الهضم"),
    ("ما العضو الذي ينتج العصارة الصفراوية؟", "الكبد"),
    ("أي عضو يفرز الإنسولين للمساعدة في تنظيم سكر الدم؟", "البنكرياس"),
]
add_rows(body, BODY, "سهل", body_easy)

body_medium = [
    ("تقريبًا، كم كمية الدم التي تُرشّحها الكليتان كل دقيقة لدى الشخص السليم؟", "حوالي نصف كوب من الدم كل دقيقة"),
    ("تقريبًا، كم وحدة ترشيح (نفرون) في الكلية الواحدة؟", "حوالي مليون نفرون"),
    ("ما دور صمامات القلب؟", "ضمان سريان الدم في اتجاه واحد"),
    ("لماذا تلف الأمعاء الدقيقة قد يسبب سوء تغذية؟", "لأنها مسؤولة عن امتصاص معظم المغذيات"),
    ("إذا قل امتصاص الماء في القولون، ماذا قد يحدث غالبًا؟", "إسهال وجفاف"),
    ("اذكر وظيفتين للجلد غير الشكل الخارجي.", "حاجز ضد الميكروبات ويساعد في تنظيم الحرارة"),
    ("ما الدور الأساسي لخلايا الدم البيضاء؟", "الدفاع عن الجسم ضد العدوى"),
    ("ما الدور الأساسي للصفائح الدموية؟", "المساعدة على تجلط الدم ووقف النزيف"),
    ("هل المثانة تُنتج البول أم تخزنه؟", "تخزنه"),
    ("كيف تُسهم الكلى في توازن الجسم الكيميائي؟", "تنظّم الماء والأملاح والمعادن في الدم"),
    ("ما العلاقة بين الكلى وضبط ضغط الدم؟", "الكلى تفرز هرمونات وتوازن سوائل يؤثران على الضغط"),
    ("ما الفرق الأساسي بين الشرايين والأوردة؟", "الشرايين تحمل الدم من القلب، والأوردة تعيده إليه"),
    ("ما فائدة الأنف أثناء التنفس؟", "تنقية وترطيب وتدفئة الهواء الداخل"),
    ("ما دور الحجاب الحاجز في التنفس؟", "ينقبض ليساعد على دخول الهواء للرئتين"),
    ("ما فائدة اللعاب في بداية الهضم؟", "يبدأ تكسير بعض النشويات ويسهل البلع"),
    ("ما وظيفة العصارة الصفراوية بشكل عام؟", "المساعدة في هضم الدهون"),
    ("إذا استمرت الحرارة المرتفعة مع تشوش أو تعب شديد، ما الإجراء الصحيح؟", "طلب تقييم طبي"),
    ("متى تكون حرارة الجسم عادةً أقل لدى البالغين الأصحاء؟", "في الصباح الباكر غالبًا"),
    ("لماذا وجود بروتين أو دم في البول قد يكون علامة غير طبيعية؟", "قد يشير إلى خلل في ترشيح الكلى"),
    ("لماذا توازن الأملاح في الدم مهم للأعصاب والعضلات؟", "لأنه ضروري لعملها الطبيعي"),
]
add_rows(body, BODY, "متوسط", body_medium)

body_hard = [
    ("رتّب مسار الدم المؤكسج بعد عودته من الرئتين حتى خروجه للجسم.", "الأذين الأيسر ثم البطين الأيسر ثم الشرايين إلى الجسم"),
    ("رتّب مسار الدم غير المؤكسج من الجسم حتى وصوله للرئتين.", "الأذين الأيمن ثم البطين الأيمن ثم الشريان الرئوي إلى الرئتين"),
    ("ما الجزآن الرئيسيان في النفرون وما دور كل منهما بإيجاز؟", "الكبيبة للترشيح والأنبوب لإعادة الامتصاص والتخلص من الفضلات"),
    ("لماذا يؤثر فشل الكلى على العضلات والأعصاب؟", "بسبب اضطراب توازن الأملاح والمعادن والسوائل"),
    ("ما الترتيب الصحيح لأعضاء المسار البولي بعد تكوين البول؟", "كلية -> حالب -> مثانة -> إحليل"),
    ("كيف يسبب ضعف امتصاص الماء في القولون إجهادًا للجسم؟", "يزيد فقد السوائل وقد يؤدي للجفاف"),
    ("لماذا الجلد عنصر مهم في الوقاية من العدوى؟", "لأنه يشكل حاجزًا واقيًا ضد الميكروبات والمواد الضارة"),
    ("هل يمكن العيش بكلية واحدة سليمة؟", "نعم في كثير من الحالات مع متابعة طبية"),
    ("لماذا الحفاظ على حرارة جسم قريبة من الطبيعي مهم حيويًا؟", "لأن الإنزيمات والعمليات الحيوية تعمل بكفاءة ضمن نطاق حراري مناسب"),
    ("ما الرابط بين وظيفة الرئة وخلايا الدم الحمراء؟", "الرئة تُحمّل الدم بالأكسجين وخلايا الدم الحمراء تنقله للأنسجة"),
]
add_rows(body, BODY, "صعب", body_hard)

validate_bucket(BODY, body, {"سهل": 20, "متوسط": 20, "صعب": 10})


# ---------------------------------------------------
# 3) تغذية ونشاط ووقاية (50)
# distribution: 20 easy / 20 medium / 10 hard
# ---------------------------------------------------
nutrition: list[dict] = []

nutrition_easy = [
    ("كم حصة فواكه وخضار يُنصح بها غالبًا يوميًا للبالغين؟", "5 حصص تقريبًا (نحو 400 جرام)"),
    ("ما الحد الأعلى الموصى به يوميًا لاستهلاك الملح تقريبًا؟", "أقل من 5 جرام يوميًا"),
    ("كم دقيقة نشاط بدني معتدل يحتاجها البالغ أسبوعيًا على الأقل؟", "150 دقيقة على الأقل"),
    ("كم دقيقة نشاط بدني يومي يحتاجها الأطفال والمراهقون (5-17 سنة)؟", "60 دقيقة يوميًا على الأقل"),
    ("كم يومًا أسبوعيًا يُنصح فيه بتقوية العضلات للبالغين؟", "يومان أو أكثر أسبوعيًا"),
    ("كم يومًا أسبوعيًا يُنصح فيه بأنشطة تقوية العضلات والعظام للأطفال والمراهقين؟", "3 أيام أسبوعيًا على الأقل"),
    ("هل النشاط البدني مفيد فقط للعضلات؟", "لا، مفيد للقلب والمزاج والنوم والصحة العامة"),
    ("ما أفضل خيار أساسي للترطيب اليومي؟", "الماء"),
    ("اذكر مثالًا على الحبوب الكاملة.", "مثل الشوفان أو القمح الكامل أو الأرز البني"),
    ("اذكر مثالًا على البقوليات الصحية.", "مثل العدس أو الفول أو الحمص"),
    ("لماذا يُفضّل تقليل المشروبات السكرية؟", "لتقليل زيادة الوزن وتسوس الأسنان"),
    ("ما نوع الدهون التي يجب تقليلها قدر الإمكان: المتحولة أم غير المشبعة؟", "الدهون المتحولة"),
    ("ما معنى التنوع في الغذاء الصحي؟", "تناول أصناف متعددة من مجموعات غذائية مختلفة"),
    ("هل اللقاحات وسيلة وقاية من أمراض معدية؟", "نعم"),
    ("ما الفائدة العامة للقاحات؟", "تقليل الإصابة والمضاعفات والوفيات من أمراض يمكن الوقاية منها"),
    ("ما النسبة القصوى الموصى بها غالبًا للسكريات الحرة من إجمالي الطاقة؟", "أقل من 10%"),
    ("هل يمكن أن تكون الفائدة الصحية أكبر عند تقليل السكريات الحرة إلى أقل من 5%؟", "نعم"),
    ("ما فائدة الألياف الغذائية عمومًا؟", "تحسين الهضم وزيادة الإحساس بالشبع"),
    ("لماذا النشاط المنتظم مهم للصحة القلبية؟", "لأنه يحسن كفاءة القلب والدورة الدموية"),
    ("هل الوقاية من الأمراض تعتمد على عامل واحد فقط؟", "لا، تعتمد على غذاء ونشاط ونوم ونظافة وتطعيم"),
]
add_rows(nutrition, NUTRITION, "سهل", nutrition_easy)

nutrition_medium = [
    ("150 دقيقة نشاط معتدل أسبوعيًا تعادل تقريبًا كم دقيقة نشاط قوي؟", "75 دقيقة نشاط قوي تقريبًا"),
    ("إذا مارس طفل أكثر من 60 دقيقة نشاطًا يوميًا، هل توجد فائدة إضافية؟", "نعم غالبًا توجد فائدة إضافية"),
    ("لماذا الجمع بين النشاط الهوائي وتمارين القوة مهم؟", "لتحسين اللياقة القلبية وبناء العضلات والعظام معًا"),
    ("اذكر مثالًا على نشاط معتدل الشدة.", "المشي السريع"),
    ("اذكر مثالًا على نشاط قوي الشدة.", "الجري"),
    ("ما الفرق الصحي بين الفاكهة الكاملة والعصير من ناحية السكر؟", "الفاكهة الكاملة غالبًا أفضل لاحتوائها أليافًا وسكرًا أقل تركيزًا"),
    ("ما علاقة الإفراط في الملح بضغط الدم؟", "قد يرفع ضغط الدم"),
    ("عند اختيار الدهون، أيهما أفضل غالبًا: غير المشبعة أم المشبعة؟", "غير المشبعة"),
    ("ما علامة قد تشير إلى قلة الترطيب؟", "بول داكن أو دوخة أو جفاف الفم"),
    ("هل العطش دائمًا مؤشر مبكر موثوق للجفاف خصوصًا لكبار السن؟", "لا"),
    ("في الجو الحار أو أثناء المرض، ماذا يحدث عادة لاحتياج السوائل؟", "يزداد"),
    ("لماذا قراءة بطاقة الغذاء مفيدة؟", "لمعرفة كمية السكر والملح والدهون والسعرات"),
    ("ما الفكرة العامة للوقاية المجتمعية باللقاحات؟", "زيادة المناعة المجتمعية وتقليل انتشار العدوى"),
    ("لماذا الإفراط في الأطعمة عالية التصنيع قد يضر الصحة؟", "لارتفاع السكر/الملح/الدهون وانخفاض القيمة الغذائية"),
    ("ما الهدف من وجبة متوازنة تحتوي خضارًا وبروتينًا وكربوهيدرات جيدة؟", "توفير طاقة ومغذيات بشكل متوازن"),
    ("ما أهمية النوم الكافي مع الغذاء والنشاط؟", "يدعم المناعة والتركيز والتعافي"),
    ("إذا كان العصير يُحسب ضمن 5 حصص، هل يعني ذلك الإكثار منه دون حدود؟", "لا، تُفضَّل الكميات المحدودة"),
    ("ما الفائدة من تقليل السكريات المضافة على صحة الفم؟", "يقل خطر التسوس"),
    ("كيف تساعد تمارين القوة أسبوعيًا في الوقاية الصحية؟", "تدعم العضلات والعظام وتحسن التمثيل الغذائي"),
    ("لماذا الاستمرارية أهم من الحماس المؤقت في الرياضة؟", "لأن الفائدة الصحية تحتاج ممارسة منتظمة"),
]
add_rows(nutrition, NUTRITION, "متوسط", nutrition_medium)

nutrition_hard = [
    ("شخص يتمرن 30 دقيقة مشي سريع لمدة 5 أيام أسبوعيًا. هل يحقق الحد الأدنى للبالغين؟", "نعم، يحقق 150 دقيقة أسبوعيًا"),
    ("مراهق عمره 15 سنة يريد تطبيق التوصيات الأساسية للنشاط. ما الحد اليومي؟", "60 دقيقة نشاط بدني يوميًا في المتوسط"),
    ("إذا زاد استهلاك الملح يوميًا لفترة طويلة، ما مضاعفة صحية شائعة؟", "ارتفاع ضغط الدم"),
    ("ما العلاقة بين المشروبات السكرية وصحة الفم والوزن؟", "قد تزيد تسوس الأسنان وترفع خطر زيادة الوزن"),
    ("كيف تشرح باختصار فائدة الجمع بين الغذاء الصحي والرياضة في الوقاية؟", "تقليل عوامل الخطر وتحسين كفاءة الجسم والمناعة"),
    ("لماذا لا يكفي حساب السعرات فقط دون جودة الطعام؟", "لأن جودة المغذيات تؤثر على الصحة والمناعة والشبع"),
    ("في خطة أسبوعية: يومان تمارين قوة + 150 دقيقة نشاط معتدل. هل هذه خطة متوافقة للبالغين؟", "نعم، متوافقة مع الحد الأدنى الموصى به"),
    ("انخفاض التغطية باللقاحات في مجتمع ما قد يؤدي إلى ماذا؟", "زيادة احتمالات تفشي أمراض يمكن الوقاية منها"),
    ("ما الرسالة الوقائية الأهم بخصوص السكر الحر في النظام الغذائي؟", "كلما انخفض ضمن الحدود الموصى بها كانت الفائدة أكبر"),
    ("ما معيار بسيط للتوازن اليومي الصحي؟", "تنوع غذائي + حركة يومية + نوم كافٍ + ترطيب جيد"),
]
add_rows(nutrition, NUTRITION, "صعب", nutrition_hard)

validate_bucket(NUTRITION, nutrition, {"سهل": 20, "متوسط": 20, "صعب": 10})


# --------------------------------------------------------
# 4) صحة القدم والحذاء وإسعافات أولية (50)
# distribution: 20 easy / 20 medium / 10 hard
# --------------------------------------------------------
foot_first_aid: list[dict] = []

foot_first_aid_easy = [
    ("ما القاعدة الذهبية للوقاية من فطريات القدم؟", "الحفاظ على القدمين نظيفتين وجافتين"),
    ("بعد غسل القدمين، أي منطقة يجب تجفيفها جيدًا؟", "بين أصابع القدم"),
    ("هل يُفضّل ارتداء جوارب نظيفة كل يوم؟", "نعم"),
    ("ما نوع الجوارب المناسب غالبًا لتقليل الرطوبة؟", "الجوارب القطنية أو التي تمتص الرطوبة"),
    ("هل مشاركة الأحذية أو الجوارب آمنة؟", "لا"),
    ("هل مشاركة المناشف مع شخص مصاب بفطريات القدم مناسبة؟", "لا"),
    ("في غرف تبديل الملابس أو الدش العام، ماذا ترتدي؟", "شبشب/صندل واقٍ"),
    ("لماذا الأحذية الحارة والضيقة سيئة للقدم؟", "تزيد العرق والرطوبة ونمو الفطريات"),
    ("إذا ابتلت الحذاء، ما التصرف الصحيح قبل إعادة الاستخدام؟", "تجفيفه جيدًا"),
    ("هل المشي حافيًا في الحمامات العامة فكرة جيدة؟", "لا"),
    ("حكة وتقشر بين الأصابع غالبًا علامة على ماذا؟", "فطريات القدم"),
    ("إذا لم تتحسن فطريات القدم بعلاج صيدلي، ماذا تفعل؟", "مراجعة الطبيب"),
    ("لماذا يجب على مريض السكري الاهتمام الشديد بأي مشكلة في القدم؟", "لأن المضاعفات قد تكون أخطر"),
    ("في الإسعاف الأولي للحروق، ما أول إجراء مهم؟", "تبريد الحرق بماء جارٍ فاتر/بارد لمدة 20 دقيقة"),
    ("هل نستخدم الثلج مباشرة على الحرق؟", "لا"),
    ("هل نضع زبدة أو معجون أسنان على الحرق الحديث؟", "لا"),
    ("هل نزيل الحلي/الخواتم قرب الحرق مبكرًا؟", "نعم إذا لم تكن ملتصقة بالجلد"),
    ("بعد تبريد الحرق، كيف نغطيه؟", "بغطاء نظيف غير ضاغط"),
    ("في الاختناق الشديد لشخص لا يستطيع الكلام أو السعال، ما البداية؟", "البدء بضربات الظهر"),
    ("إذا استمر الاختناق ولم يخرج الجسم العالق، ماذا يجب فعلُه؟", "الاتصال بالإسعاف فورًا"),
]
add_rows(foot_first_aid, FOOT_FIRST_AID, "سهل", foot_first_aid_easy)

foot_first_aid_medium = [
    ("لماذا البيئة الرطبة داخل الحذاء تشجع الفطريات؟", "لأن الفطريات تنمو أفضل في الدفء والرطوبة"),
    ("ما فائدة تغيير الجوارب بعد التعرق الشديد؟", "تقليل الرطوبة وفرصة العدوى الفطرية"),
    ("لماذا يُنصح بتبديل الحذاء وعدم لبس نفس الزوج يوميًا دائمًا؟", "لإعطاء الحذاء وقتًا ليجف"),
    ("بعد انتهاء علاج فطريات القدم، لماذا نكمل عادات النظافة؟", "لتقليل احتمال رجوع العدوى"),
    ("قدم حمراء وساخنة ومؤلمة مع فطريات قد تعني ماذا؟", "احتمال عدوى أشد وتحتاج تقييمًا طبيًا"),
    ("لماذا الأحذية جيدة التهوية خيار أفضل؟", "لأنها تقلل الرطوبة والعرق"),
    ("ما فائدة تخصيص منشفة للقدمين وغسلها دوريًا؟", "تقليل انتقال العدوى"),
    ("متى يُفضّل تغيير الجوارب أثناء اليوم؟", "عند ابتلالها أو تعرقها"),
    ("في حرق حراري، لماذا يجب إيقاف مصدر الحرق أولًا؟", "لمنع استمرار تلف الجلد"),
    ("إذا كانت الملابس ملتصقة بالحرق، ماذا تفعل؟", "لا تُنزع بالقوة"),
    ("أثناء تبريد الحرق، لماذا نهتم بتدفئة باقي الجسم؟", "لتجنب انخفاض حرارة الجسم"),
    ("لماذا يجب الحذر من التبريد المفرط للأطفال وكبار السن في الحروق الواسعة؟", "لتفادي هبوط حرارة الجسم"),
    ("في الحروق الكيميائية، ما الإجراء الأساسي السريع؟", "غسل المكان بماء جارٍ لمدة 20 دقيقة على الأقل مع إزالة الملابس الملوثة"),
    ("في الاختناق الشديد لشخص واعٍ فوق سنة، ما التسلسل الشائع؟", "5 ضربات ظهر ثم 5 ضغطات بطن وتتكرر"),
    ("لمن لا تُجرى ضغطات البطن (Heimlich) بالطريقة المعتادة؟", "للرضع أقل من سنة وللحامل"),
    ("بعد انتهاء نوبة الاختناق وخروج الجسم، هل يلزم تقييم طبي؟", "نعم"),
    ("في الاختناق الخفيف، ما أول خطوة مساعدة؟", "تشجيع الشخص على السعال لمحاولة إخراج الجسم العالق"),
    ("في الاختناق الخفيف، هل يجوز إدخال الأصابع في فم المصاب إذا لم ترَ الجسم؟", "لا"),
    ("في الحروق، لماذا يمنع وضع الكريمات مباشرة في البداية؟", "قد تزيد التلوث وتعيق تقييم الإصابة"),
    ("لماذا فتح الحذاء وتهوية القدم بعد النشاط الرياضي مفيد؟", "لتقليل الرطوبة التي تساعد الفطريات"),
]
add_rows(foot_first_aid, FOOT_FIRST_AID, "متوسط", foot_first_aid_medium)

foot_first_aid_hard = [
    ("لاعب انتهى تمرينه وجواربه مبللة. ما الإجراء الوقائي الأفضل فورًا؟", "تبديل الجوارب وتجفيف القدمين"),
    ("شخص تتكرر عنده فطريات القدم لأنه يرتدي نفس الحذاء يوميًا. ما الحل العملي؟", "تدوير الأحذية وترك كل زوج ليجف"),
    ("لماذا تعود فطريات القدم بسرعة عند استمرار الرطوبة داخل الحذاء؟", "لأن بيئة الفطر المفضلة دافئة ورطبة"),
    ("انسكب منظف كيميائي ساخن على الجلد. ما أول خطوة إسعافية؟", "إبعاد المصدر ثم غسل المنطقة بماء جارٍ لمدة كافية (20 دقيقة)"),
    ("حرق بالزيت، واقترح شخص وضع معجون أسنان. ما القرار الصحيح؟", "الرفض وتبريد الحرق بالماء الجاري فقط ثم التغطية المناسبة"),
    ("شخص يختنق ولا يستطيع الكلام أو السعال. ما التسلسل الصحيح قبل وصول الإسعاف؟", "5 ضربات ظهر ثم 5 ضغطات بطن بالتبادل"),
    ("رضيع أقل من سنة يختنق. هل نطبق ضغطات البطن المعتادة للبالغين؟", "لا، تُستخدم طريقة إسعاف خاصة بالرضع"),
    ("مريض سكري لديه جرح صغير في القدم لكنه مؤلم ومحمر. لماذا يلزم تدخل مبكر؟", "لتقليل خطر المضاعفات والعدوى العميقة"),
    ("لماذا لا يجب نزع أي شيء ملتصق بالجلد في الحروق؟", "لأنه قد يزيد تلف الأنسجة والنزيف"),
    ("اذكر 4 عناصر وقاية تقلل فطريات القدم داخل الحذاء.", "تجفيف بين الأصابع، جوارب نظيفة، أحذية جيدة التهوية ومتبادلة، عدم مشاركة الأحذية/المناشف"),
]
add_rows(foot_first_aid, FOOT_FIRST_AID, "صعب", foot_first_aid_hard)

validate_bucket(FOOT_FIRST_AID, foot_first_aid, {"سهل": 20, "متوسط": 20, "صعب": 10})


# -----------------------
# Final merge and checks
# -----------------------
questions: list[dict] = []
for i in range(50):
    questions.append(habits[i])
    questions.append(body[i])
    questions.append(nutrition[i])
    questions.append(foot_first_aid[i])

if len(questions) != 200:
    raise ValueError(f"Expected 200 questions, got {len(questions)}")

difficulty_counts = Counter(item["difficulty"] for item in questions)
expected_difficulty = {"سهل": 80, "متوسط": 80, "صعب": 40}
if dict(difficulty_counts) != expected_difficulty:
    raise ValueError(f"Difficulty mismatch: {difficulty_counts}")

subtopic_counts = Counter(item["subtopic"] for item in questions)
expected_subtopics = {
    HABITS: 50,
    BODY: 50,
    NUTRITION: 50,
    FOOT_FIRST_AID: 50,
}
if dict(subtopic_counts) != expected_subtopics:
    raise ValueError(f"Subtopic mismatch: {subtopic_counts}")

question_texts = [item["question"] for item in questions]
if len(question_texts) != len(set(question_texts)):
    dup_counter = Counter(question_texts)
    duplicates = [text for text, count in dup_counter.items() if count > 1]
    raise ValueError(f"Duplicate questions found: {duplicates[:10]}")

payload = {
    "id": "public-health",
    "title": "الصحة العامة",
    "description": "200 سؤال في الصحة العامة: نظافة شخصية، وظائف الجسم، تغذية ووقاية، وصحة القدم داخل الحذاء مع إسعافات أولية أساسية.",
    "questions": questions,
}

OUTPUT_PATH.write_text(json.dumps(payload, ensure_ascii=False, indent=2), encoding="utf-8")

print("Generated:", OUTPUT_PATH)
print("Total:", len(questions))
