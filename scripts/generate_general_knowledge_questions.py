#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json
from collections import Counter
from pathlib import Path


OUTPUT_PATH = Path(__file__).resolve().parents[1] / "src" / "data" / "questions" / "general-knowledge.json"


def make(question: str, answer: str, subtopic: str, difficulty: str) -> dict:
    return {
        "question": question.strip(),
        "answer": answer.strip(),
        "subtopic": subtopic,
        "difficulty": difficulty,
    }


def add_rows(bucket: list[dict], subtopic: str, difficulty: str, rows: list[tuple[str, str]]) -> None:
    for question, answer in rows:
        bucket.append(make(question, answer, subtopic, difficulty))


def validate_bucket(name: str, bucket: list[dict], expected: dict[str, int]) -> None:
    if len(bucket) != 50:
        raise ValueError(f"{name}: expected 50 questions, got {len(bucket)}")
    counts = Counter(item["difficulty"] for item in bucket)
    if dict(counts) != expected:
        raise ValueError(f"{name}: difficulty mismatch {counts}, expected {expected}")


MODERN = "العصر الحالي والتقنية"
GEOGRAPHY = "جغرافيا ودول"
HISTORY = "تاريخ وحضارات"
SCIENCE_CULTURE = "علوم وثقافة عامة"


# ------------------------------------------------
# 1) العصر الحالي والتقنية (50)
# distribution: 20 easy / 20 medium / 10 hard
# ------------------------------------------------
modern: list[dict] = []

modern_easy = [
    ("متى أُطلق ChatGPT للعامة لأول مرة؟", "30 نوفمبر 2022"),
    ("ما اسم مهمة ناسا غير المأهولة التي انطلقت نحو القمر في 2022؟", "Artemis I"),
    ("في أي تاريخ نجحت مهمة تشاندرايان-3 في الهبوط الناعم على القمر؟", "23 أغسطس 2023"),
    ("أين أُقيم مؤتمر المناخ COP28؟", "في دبي بدولة الإمارات العربية المتحدة"),
    ("كم عدد الدول المستضيفة لكأس العالم 2026؟", "3 دول"),
    ("ما الدول المستضيفة لكأس العالم 2026؟", "الولايات المتحدة وكندا والمكسيك"),
    ("كم عدد المنتخبات في كأس العالم 2026؟", "48 منتخبًا"),
    ("ماذا تعني 5G؟", "الجيل الخامس من شبكات الاتصالات المحمولة"),
    ("ماذا يعني QR Code؟", "رمز استجابة سريعة"),
    ("ماذا يعني GPS؟", "نظام تحديد المواقع العالمي"),
    ("ماذا يعني VPN؟", "شبكة خاصة افتراضية"),
    ("ما المقصود بالتخزين السحابي؟", "حفظ الملفات على خوادم عبر الإنترنت"),
    ("ما التقنية التي تتيح الدفع بتقريب الهاتف من جهاز الدفع؟", "NFC"),
    ("ماذا يعني IoT؟", "إنترنت الأشياء"),
    ("ما اسم عامل الأمان الإضافي بعد كلمة المرور؟", "المصادقة الثنائية"),
    ("ما الفائدة الأساسية من النسخ الاحتياطي؟", "استرجاع البيانات عند فقدها"),
    ("ما اسم شبكة الإنترنت اللاسلكية المنزلية الشائعة؟", "Wi-Fi"),
    ("أي منصة معروفة بمقاطع الفيديو القصيرة وتنتشر عالميًا؟", "تيك توك"),
    ("ما المقصود بمكالمة فيديو؟", "اتصال صوتي ومرئي عبر الإنترنت"),
    ("ما الفائدة من تحديث تطبيقات الهاتف باستمرار؟", "تحسين الأداء وسد الثغرات"),
]
add_rows(modern, MODERN, "سهل", modern_easy)

modern_medium = [
    ("أيهما أحدث تقنيًا: 4G أم 5G؟", "5G"),
    ("إذا عرف شخص كلمة مرورك فقط بينما مفعّلة المصادقة الثنائية، هل يكفي للدخول غالبًا؟", "لا"),
    ("ما الفرق الأساسي بين الواقع الافتراضي (VR) والواقع المعزز (AR)؟", "VR ينقلك لعالم افتراضي كامل، وAR يضيف عناصر رقمية على الواقع"),
    ("لماذا يُعد تحديث نظام التشغيل مهمًا أمنيًا؟", "لأنه يصلح ثغرات الحماية"),
    ("ما الخطر في استخدام نفس كلمة المرور لكل الحسابات؟", "اختراق حساب واحد قد يعرّض بقية الحسابات للخطر"),
    ("ما وظيفة مدير كلمات المرور؟", "حفظ كلمات المرور بشكل مشفر وتوليد كلمات قوية"),
    ("ما فائدة مزامنة الملفات بين الهاتف والكمبيوتر؟", "الوصول لآخر نسخة من الملفات على كل الأجهزة"),
    ("ما المقصود بالبيانات الضخمة (Big Data)؟", "بيانات هائلة تُحلل لاستخراج أنماط ومؤشرات"),
    ("ما المقصود بالبصمة الرقمية للمستخدم؟", "الأثر الذي يتركه نشاطه على الإنترنت"),
    ("ما الفرق بين HTTP وHTTPS؟", "HTTPS أكثر أمانًا لأنه يستخدم التشفير"),
    ("ما المقصود بالتصيّد الإلكتروني؟", "محاولة خداع المستخدم لسرقة بياناته"),
    ("وصلتك رسالة تطلب رمز التحقق OTP، ما التصرف الآمن؟", "عدم مشاركة الرمز مع أي شخص"),
    ("ما معنى البرمجيات مفتوحة المصدر؟", "برمجيات كودها متاح للفحص والتعديل"),
    ("ما المقصود بزمن الاستجابة (Ping) في الشبكات؟", "الوقت اللازم لذهاب الإشارة وعودتها"),
    ("ما وظيفة وضع الطيران في الهاتف؟", "تعطيل الاتصالات اللاسلكية مؤقتًا"),
    ("هل وضع التصفح الخفي يمنع مزود الإنترنت من رؤية النشاط تمامًا؟", "لا"),
    ("ما الفكرة العامة للواقع المختلط (MR)؟", "دمج عناصر رقمية تتفاعل مع البيئة الحقيقية"),
    ("هل النسخة الاحتياطية الواحدة القديمة تكفي دائمًا؟", "لا، يجب تحديث النسخ دوريًا"),
    ("هل الذكاء الاصطناعي يفكر مثل الإنسان حرفيًا؟", "لا، يعتمد على أنماط وتوقعات تعلمها من البيانات"),
    ("كم بلغ عدد مستخدمي الإنترنت عالميًا تقريبًا بحسب تقدير ITU لعام 2025؟", "حوالي 6 مليارات مستخدم"),
]
add_rows(modern, MODERN, "متوسط", modern_medium)

modern_hard = [
    ("موظف فعّل المصادقة الثنائية لكنه أدخل رمز التحقق في صفحة مزيفة، ما نوع الهجوم؟", "تصيّد إلكتروني"),
    ("ملف حجمه 1 جيجابايت (حوالي 8 جيجابت) وسرعة التحميل 100 ميجابت/ث، كم الزمن النظري تقريبًا؟", "حوالي 80 ثانية"),
    ("هاتف يدعم 5G لكن الشريحة والباقـة 4G فقط، على أي شبكة سيعمل غالبًا؟", "4G"),
    ("نسخ احتياطي كامل شهري + تفاضلي يومي: لاستعادة أحدث نسخة تحتاج ماذا؟", "آخر نسخة كاملة مع كل النسخ التفاضلية بعدها"),
    ("لماذا لا يكفي مضاد الفيروسات وحده للحماية الكاملة؟", "لأن المخاطر تشمل تصيّدًا وهندسة اجتماعية وثغرات جديدة"),
    ("لماذا يضعف تحديد الموقع GPS غالبًا داخل المباني العميقة؟", "لضعف أو حجب إشارات الأقمار الصناعية"),
    ("ما الفائدة من سلة المحذوفات/سجل الإصدارات في التخزين السحابي؟", "استعادة الملفات المحذوفة أو النسخ السابقة"),
    ("ما الفرق بين الذكاء الاصطناعي الضيق والذكاء الاصطناعي العام؟", "الضيق متخصص في مهام محددة، والعام قادر نظريًا على مهام معرفية واسعة"),
    ("ما نسبة سكان العالم المتصلين بالإنترنت تقريبًا وفق ITU في 2025؟", "حوالي 74%"),
    ("في أمن المعلومات، ما الخيار الأقوى: كلمة مرور قوية فقط أم كلمة مرور قوية + مصادقة ثنائية؟", "كلمة مرور قوية مع مصادقة ثنائية"),
]
add_rows(modern, MODERN, "صعب", modern_hard)

validate_bucket(MODERN, modern, {"سهل": 20, "متوسط": 20, "صعب": 10})


# ------------------------------------
# 2) جغرافيا ودول (50)
# distribution: 20 easy / 20 medium / 10 hard
# ------------------------------------
geography: list[dict] = []

geography_easy = [
    ("ما عاصمة مصر؟", "القاهرة"),
    ("ما عاصمة اليابان؟", "طوكيو"),
    ("ما عاصمة فرنسا؟", "باريس"),
    ("ما أكبر دولة في العالم من حيث المساحة؟", "روسيا"),
    ("ما أصغر قارة من حيث المساحة؟", "أوقيانوسيا (أستراليا)"),
    ("في أي قارة تقع البرازيل؟", "أمريكا الجنوبية"),
    ("ما أكبر محيط على سطح الأرض؟", "المحيط الهادئ"),
    ("ما البحر الذي يفصل غالبًا بين إفريقيا وأوروبا؟", "البحر المتوسط"),
    ("في أي مدينة تقع الأهرامات الكبرى؟", "الجيزة"),
    ("ما أعلى قمة جبلية في العالم؟", "جبل إيفرست"),
    ("ما أكبر صحراء حارة في العالم؟", "الصحراء الكبرى"),
    ("ما القارة غير المأهولة بشكل دائم؟", "القارة القطبية الجنوبية (أنتاركتيكا)"),
    ("أي دولة تقع فيها مدينة إسطنبول؟", "تركيا"),
    ("ما القناة التي تربط البحر الأحمر بالبحر المتوسط؟", "قناة السويس"),
    ("ما المضيق الذي يربط البحر الأحمر بخليج عدن؟", "مضيق باب المندب"),
    ("ما الدولة التي يقع فيها جبل فوجي؟", "اليابان"),
    ("أي محيط يقع شرق إفريقيا غالبًا؟", "المحيط الهندي"),
    ("ما النهر الذي يمر بمدينة القاهرة؟", "نهر النيل"),
    ("ما الدولة التي تقع فيها مدينة الدار البيضاء؟", "المغرب"),
    ("ما المدينة السعودية التي توجد بها الكعبة المشرفة؟", "مكة المكرمة"),
]
add_rows(geography, GEOGRAPHY, "سهل", geography_easy)

geography_medium = [
    ("ما أكبر قارة في العالم من حيث المساحة؟", "آسيا"),
    ("في أي قارة تقع الأرجنتين؟", "أمريكا الجنوبية"),
    ("ما الدولة التي تشترك بحدود برية مع الولايات المتحدة من الشمال؟", "كندا"),
    ("ما الدولة التي تضم إقليم غرينلاند؟", "الدنمارك"),
    ("ما البحر الذي يفصل مصر والسعودية؟", "البحر الأحمر"),
    ("ما العملة الرسمية في اليابان؟", "الين الياباني"),
    ("ما العملة الرسمية في سويسرا؟", "الفرنك السويسري"),
    ("ما العملة المشتركة في معظم دول الاتحاد الأوروبي؟", "اليورو"),
    ("ما الدولة التي مقر حكومتها في لاهاي بينما عاصمتها أمستردام؟", "هولندا"),
    ("ما الدولة التي تغطي قارة كاملة تقريبًا؟", "أستراليا"),
    ("ما القارة التي تضم أكبر عدد من الدول؟", "إفريقيا"),
    ("ما أكبر جزيرة في العالم (باستثناء القارات)؟", "غرينلاند"),
    ("ما البحر المغلق الذي يعد أكبر مسطح مائي داخلي مالح في العالم؟", "بحر قزوين"),
    ("ما الدولة التي تمر عبرها قناة بنما؟", "بنما"),
    ("ما السلسلة الجبلية التي تمتد على طول غرب أمريكا الجنوبية؟", "جبال الأنديز"),
    ("كم عدد قارات العالم وفق التقسيم التعليمي الشائع؟", "7 قارات"),
    ("كم عدد دول الاتحاد الأوروبي حاليًا؟", "27 دولة"),
    ("ما الدولة التي يقع فيها نهر الأمازون بشكل رئيسي؟", "البرازيل"),
    ("ما الدولة التي تقع فيها مدينة كيب تاون؟", "جنوب إفريقيا"),
    ("ما المضيق الذي يفصل بين المغرب وإسبانيا؟", "مضيق جبل طارق"),
]
add_rows(geography, GEOGRAPHY, "متوسط", geography_medium)

geography_hard = [
    ("إذا كانت الساعة 12 ظهرًا بتوقيت غرينتش، فما الوقت التقريبي في القاهرة شتاءً؟", "حوالي 2 ظهرًا"),
    ("ما الفرق الجغرافي المختصر بين بريطانيا العظمى والمملكة المتحدة؟", "بريطانيا العظمى جزيرة (إنجلترا واسكتلندا وويلز)، والمملكة المتحدة تضمها مع أيرلندا الشمالية"),
    ("ما السبب الأساسي لوجود مناطق زمنية مختلفة على الأرض؟", "دوران الأرض حول نفسها"),
    ("إذا تحركت من المغرب إلى مصر فأنت تتجه غالبًا نحو أي اتجاه رئيسي؟", "الشرق"),
    ("أيهما أقرب جغرافيًا إلى أوروبا: المغرب أم جنوب إفريقيا؟", "المغرب"),
    ("في رحلة جوية طويلة من شرق آسيا إلى غرب أمريكا قد يتغير تاريخ الوصول بسبب ماذا؟", "عبور خط التاريخ الدولي"),
    ("كم مدينة مستضيفة في كأس العالم 2026 حسب فيفا؟", "16 مدينة"),
    ("أي دولة ستستضيف المباراة النهائية لكأس العالم 2026؟", "الولايات المتحدة"),
    ("ما الدولة الإفريقية التي يلتقي فيها النيل الأزرق مع النيل الأبيض لتكوين نهر النيل الموحد؟", "السودان"),
    ("ما المضيق التركي الذي يصل البحر الأسود ببحر مرمرة؟", "مضيق البوسفور"),
]
add_rows(geography, GEOGRAPHY, "صعب", geography_hard)

validate_bucket(GEOGRAPHY, geography, {"سهل": 20, "متوسط": 20, "صعب": 10})


# -------------------------------------
# 3) تاريخ وحضارات (50)
# distribution: 20 easy / 20 medium / 10 hard
# -------------------------------------
history: list[dict] = []

history_easy = [
    ("في أي عام بدأت الحرب العالمية الأولى؟", "1914"),
    ("في أي عام انتهت الحرب العالمية الثانية؟", "1945"),
    ("أين قامت الحضارة الفرعونية؟", "في مصر"),
    ("ما اسم الكتابة التي استخدمها المصريون القدماء؟", "الكتابة الهيروغليفية"),
    ("من القائد الذي ارتبط بتحرير القدس في معركة حطين؟", "صلاح الدين الأيوبي"),
    ("في أي عام سقطت غرناطة وانتهى الحكم الإسلامي في الأندلس؟", "1492"),
    ("في أي عام ارتبطت رحلة كولومبس إلى العالم الجديد؟", "1492"),
    ("ما العاصمة التي اتخذها العباسيون مركزًا لدولتهم؟", "بغداد"),
    ("من الرحالة المغربي الشهير صاحب الرحلة المعروفة؟", "ابن بطوطة"),
    ("في أي عام اندلعت الثورة الفرنسية؟", "1789"),
    ("في أي عام أُسست الأمم المتحدة؟", "1945"),
    ("كم كان عدد الدول المؤسسة للأمم المتحدة؟", "51 دولة"),
    ("متى دخل دستور منظمة الصحة العالمية حيز النفاذ؟", "7 أبريل 1948"),
    ("من مؤسس الدولة الأموية؟", "معاوية بن أبي سفيان"),
    ("في أي قارة قامت حضارة الإنكا؟", "أمريكا الجنوبية"),
    ("من اخترع الطباعة الحديثة بالأحرف المتحركة في أوروبا؟", "يوهان غوتنبرغ"),
    ("ما المدينة التاريخية المرتبطة ببداية الألعاب الأولمبية القديمة؟", "أولمبيا في اليونان"),
    ("ما اسم الطريق التجاري التاريخي الذي ربط الشرق بالغرب؟", "طريق الحرير"),
    ("في أي عام هبط الإنسان على القمر لأول مرة؟", "1969"),
    ("من أول إنسان سار على سطح القمر؟", "نيل أرمسترونغ"),
]
add_rows(history, HISTORY, "سهل", history_easy)

history_medium = [
    ("ما المقصود بمصطلح الحرب الباردة؟", "صراع سياسي وعسكري غير مباشر بين قوى كبرى"),
    ("في أي عام سقط جدار برلين؟", "1989"),
    ("في أي عام أُعيد توحيد ألمانيا رسميًا؟", "1990"),
    ("ما الحدث الذي تبدأ به السنة الهجرية؟", "الهجرة النبوية"),
    ("ما الحضارة التي اشتهرت بقوانين حمورابي؟", "الحضارة البابلية"),
    ("ما الحضارة التي ارتبطت بالكتابة المسمارية مبكرًا؟", "الحضارة السومرية"),
    ("ما البحر الذي ازدهرت حوله الحضارة الفينيقية؟", "البحر المتوسط"),
    ("في أي بلد بدأت الثورة الصناعية الحديثة؟", "بريطانيا"),
    ("ما القرن الذي وقعت فيه الثورة الفرنسية؟", "القرن الثامن عشر"),
    ("من الشخصية المرتبطة بحركة استقلال الهند السلمية؟", "المهاتما غاندي"),
    ("ما المدينة التي كانت عاصمة للإمبراطورية البيزنطية؟", "القسطنطينية"),
    ("هل سقوط القسطنطينية كان قبل اكتشاف أمريكا أم بعده؟", "قبله"),
    ("ما العام الذي سقطت فيه القسطنطينية؟", "1453"),
    ("ما الاسم الآخر الشائع للإمبراطورية البيزنطية؟", "الإمبراطورية الرومانية الشرقية"),
    ("ما المقصود بعصر النهضة الأوروبي بإيجاز؟", "فترة ازدهار علمي وفني وفكري في أوروبا"),
    ("في أي عام تأسست الوكالة الدولية للطاقة الذرية IAEA؟", "1957"),
    ("ماذا يرمز مصطلح BCE في التأريخ؟", "قبل الميلاد"),
    ("ما المقصود بمصطلح CE في التأريخ الحديث؟", "الحقبة الميلادية"),
    ("في أي عام انتهت الحرب العالمية الأولى؟", "1918"),
    ("ما الحدث التاريخي المرتبط بتاريخ 9 نوفمبر 1989؟", "فتح/سقوط جدار برلين"),
]
add_rows(history, HISTORY, "متوسط", history_medium)

history_hard = [
    ("أيهما أقدم: حدث وقع عام 330 ق.م أم حدث وقع عام 1453 م؟", "330 ق.م"),
    ("كم سنة تقريبًا بين تأسيس الأمم المتحدة (1945) وعام 2025؟", "80 سنة"),
    ("كم سنة تقريبًا استمرت الحرب العالمية الأولى من 1914 إلى 1918؟", "4 سنوات"),
    ("ما الفارق الزمني بين تأسيس الأمم المتحدة (1945) ونفاذ دستور منظمة الصحة العالمية (1948)؟", "3 سنوات"),
    ("رتّب زمنيًا من الأقدم إلى الأحدث: اكتشاف أمريكا 1492، الثورة الفرنسية 1789، الحرب العالمية الأولى 1914.", "1492 ثم 1789 ثم 1914"),
    ("كم سنة بين سقوط الأندلس 1492 وبداية القرن الحادي والعشرين 2001؟", "509 سنوات"),
    ("أيهما حدث أولًا: اختراع الطباعة الحديثة في أوروبا أم الثورة الصناعية؟", "اختراع الطباعة الحديثة"),
    ("إذا قيل: القرن العشرون يبدأ 1900، هل العبارة صحيحة؟", "لا، يبدأ عام 1901"),
    ("إذا كان حدثان في 1945 و1989 فكم الفارق بينهما؟", "44 سنة"),
    ("أي تاريخ أقرب زمنيًا لنا: 1969 أم 1914؟", "1969"),
]
add_rows(history, HISTORY, "صعب", history_hard)

validate_bucket(HISTORY, history, {"سهل": 20, "متوسط": 20, "صعب": 10})


# ------------------------------------------------
# 4) علوم وثقافة عامة (50)
# distribution: 20 easy / 20 medium / 10 hard
# ------------------------------------------------
science_culture: list[dict] = []

science_easy = [
    ("ما الصيغة الكيميائية للماء؟", "H2O"),
    ("ما أقرب كوكب إلى الشمس؟", "عطارد"),
    ("ما الكوكب المعروف بالكوكب الأحمر؟", "المريخ"),
    ("ما أكبر كوكب في المجموعة الشمسية؟", "المشتري"),
    ("ما وحدة قياس شدة التيار الكهربائي؟", "الأمبير"),
    ("ما العملية التي تصنع بها النباتات غذاءها؟", "التمثيل الضوئي"),
    ("ما الغاز الأساسي الذي يحتاجه الإنسان للتنفس؟", "الأكسجين"),
    ("ما رمز عنصر الحديد؟", "Fe"),
    ("ما أصلب مادة طبيعية معروفة؟", "الماس"),
    ("كم درجة غليان الماء عند مستوى سطح البحر؟", "100 درجة مئوية"),
    ("كم درجة تجمد الماء؟", "0 درجة مئوية"),
    ("كم عدد الأسنان الدائمة لدى الإنسان البالغ غالبًا؟", "32 سنًا"),
    ("ما أكبر عضو في جسم الإنسان؟", "الجلد"),
    ("كم عدد عظام الإنسان البالغ تقريبًا؟", "206 عظمة"),
    ("ما أسرع حيوان بري؟", "الفهد"),
    ("ما الجهاز الذي يسجل الاهتزازات الزلزالية؟", "السيسموغراف"),
    ("من صاحب لوحة الموناليزا؟", "ليوناردو دا فينشي"),
    ("في أي مدينة يقع متحف اللوفر؟", "باريس"),
    ("ما اسم الآلة الموسيقية ذات المفاتيح والـ88 مفتاحًا غالبًا؟", "البيانو"),
    ("ما اللغة الأكثر انتشارًا كلغة أم في العالم؟", "الصينية المندرين"),
]
add_rows(science_culture, SCIENCE_CULTURE, "سهل", science_easy)

science_medium = [
    ("لماذا يبدو لون السماء أزرق غالبًا؟", "بسبب تشتت رايلي للضوء"),
    ("ما المصدر الطبيعي الأساسي لفيتامين د؟", "أشعة الشمس"),
    ("ما الفرق بين الطقس والمناخ؟", "الطقس حالة قصيرة المدى، والمناخ نمط طويل المدى"),
    ("ما مثالان شائعان للطاقة المتجددة؟", "الطاقة الشمسية وطاقة الرياح"),
    ("لماذا يساعد الملح أحيانًا على إذابة الجليد؟", "لأنه يخفض درجة التجمد"),
    ("ما العلاقة الرياضية الأساسية بين السرعة والمسافة والزمن؟", "السرعة = المسافة ÷ الزمن"),
    ("أي عضو يفرز هرمون الإنسولين؟", "البنكرياس"),
    ("ما المادة الوراثية الأساسية في الخلايا؟", "DNA"),
    ("ما مضمون قانون نيوتن الثالث بإيجاز؟", "لكل فعل رد فعل مساوٍ له في المقدار ومضاد له في الاتجاه"),
    ("إذا كان الرقم الهيدروجيني أقل من 7 فالمحلول يكون ماذا؟", "حمضي"),
    ("ما وظيفة طبقة الأوزون الأساسية؟", "حماية الأرض من معظم الأشعة فوق البنفسجية الضارة"),
    ("لماذا يطفو رواد الفضاء داخل المركبة المدارية؟", "لأنهم في حالة سقوط حر مستمر (جاذبية صغرى)"),
    ("ما الكوكب الذي يشتهر بحلقاته الواضحة؟", "زحل"),
    ("هل الصوت أسرع من الضوء في الفراغ؟", "لا"),
    ("ما فائدة اللقاحات عمومًا للجسم؟", "تحفيز المناعة لتكوين حماية ضد المرض"),
    ("ما المقصود بالنظام الثنائي في الحوسبة؟", "نظام عد يعتمد على الرقمين 0 و1"),
    ("ما معنى ISBN في عالم النشر؟", "رقم معياري دولي لتعريف الكتب"),
    ("ما اسم الظاهرة المرتبطة بارتفاع حرارة الأرض بسبب تراكم غازات معينة؟", "الاحتباس الحراري"),
    ("ما وحدة قياس القوة في النظام الدولي؟", "النيوتن"),
    ("ما العنصر الكيميائي الذي يرمز له بـ Na؟", "الصوديوم"),
]
add_rows(science_culture, SCIENCE_CULTURE, "متوسط", science_medium)

science_hard = [
    ("جسم كتلته 10 جرام وحجمه 2 سم³، ما كثافته؟", "5 جرام/سم³"),
    ("في وسط ثابت السرعة الموجية، إذا زاد الطول الموجي فماذا يحدث للتردد؟", "يقل التردد"),
    ("لماذا يطهى الطعام أسرع في قدر الضغط؟", "لأن الضغط الأعلى يرفع درجة غليان الماء"),
    ("إذا انخفض pH من 3 إلى 2، كم مرة تزيد الحموضة تقريبًا؟", "10 مرات"),
    ("درجة حرارة 25°م تساوي تقريبًا كم كلفن؟", "حوالي 298 كلفن"),
    ("مقاومتان 2 أوم و3 أوم على التوالي، ما المقاومة المكافئة؟", "5 أوم"),
    ("هل كل المعادن تنجذب للمغناطيس؟", "لا"),
    ("أيّهما أسرع في الفراغ: الضوء أم الصوت؟", "الضوء"),
    ("إذا زادت غازات الدفيئة بشكل كبير، ما النتيجة المناخية الأرجح؟", "ارتفاع متوسط حرارة الأرض"),
    ("إذا دار جسم دورة كاملة في 24 ساعة، فما الزمن لربع دورة؟", "6 ساعات"),
]
add_rows(science_culture, SCIENCE_CULTURE, "صعب", science_hard)

validate_bucket(SCIENCE_CULTURE, science_culture, {"سهل": 20, "متوسط": 20, "صعب": 10})


# -----------------------
# Final merge and checks
# -----------------------
questions: list[dict] = []
for i in range(50):
    questions.append(modern[i])
    questions.append(geography[i])
    questions.append(history[i])
    questions.append(science_culture[i])

if len(questions) != 200:
    raise ValueError(f"Expected 200 questions, got {len(questions)}")

difficulty_counts = Counter(item["difficulty"] for item in questions)
expected_difficulty = {"سهل": 80, "متوسط": 80, "صعب": 40}
if dict(difficulty_counts) != expected_difficulty:
    raise ValueError(f"Difficulty mismatch: {difficulty_counts}")

subtopic_counts = Counter(item["subtopic"] for item in questions)
expected_subtopics = {
    MODERN: 50,
    GEOGRAPHY: 50,
    HISTORY: 50,
    SCIENCE_CULTURE: 50,
}
if dict(subtopic_counts) != expected_subtopics:
    raise ValueError(f"Subtopic mismatch: {subtopic_counts}")

question_texts = [item["question"] for item in questions]
if len(question_texts) != len(set(question_texts)):
    dup_counter = Counter(question_texts)
    duplicates = [text for text, count in dup_counter.items() if count > 1]
    raise ValueError(f"Duplicate questions found: {duplicates[:10]}")

payload = {
    "id": "general-knowledge",
    "title": "المعلومات العامة",
    "description": "200 سؤال معلومات عامة متنوعة تجمع بين العصر الحالي والتقنية والجغرافيا والتاريخ والعلوم والثقافة.",
    "questions": questions,
}

OUTPUT_PATH.write_text(json.dumps(payload, ensure_ascii=False, indent=2), encoding="utf-8")

print("Generated:", OUTPUT_PATH)
print("Total:", len(questions))
